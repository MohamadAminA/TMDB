@using IMDB.Domain.CardViewModel;
@using IMDB.Domain.DTOs
@model MovieDetailsViewModel
@section Header{

	<style>
		.li {
			margin: 10px;
		}

		.col-lg-12 {
			-webkit-box-flex: 0;
			-ms-flex: 0 0 100%;
			flex: 0 0 100%;
			max-width: 100%;
			background-color: #03092b78;
			border-radius: 15px;
			box-shadow: rgba(18, 11, 247, 0.4) 5px 5px, rgba(21, 6, 204, 0.3) 10px 10px, rgba(23, 7, 138, 0.2) 15px 15px, rgba(19, 2, 100, 0.1) 20px 20px, rgba(240, 46, 170, 0.05) 25px 25px;
			padding-bottom: 20px;
		}

		hr {
			margin-bottom: 8px;
			border-top: 1px solid #ddd;
		}

		.portfolio-menu li.active::before, .portfolio-menu li:hover::before {
			background: #313deb;
		}

		.comment {
			font-size: 23px;
			padding: 0px 0px 15px 15px;
			background-color: #03092b78;
		}

		.reply {
			border: 2px solid;
			border-radius: 30px 30px 30px 0px;
		}

		.secondrep {
			border: 2px solid;
			border-radius: 0px 30px 30px 30px;
		}

		.img-person {
			border-radius: 30px;
			height: 30px;
			width: 30px;
		}

		.badge-secondary {
			background-color: rgb(15, 28, 61);
			font-size: 15px;
		}


	</style>
}
	<!-- breadcrumb area start -->
	<section class="breadcrumb-area">
		<div class="container">
			<div class="row">
				<div class="col-lg-12" style="box-shadow: rgba(18, 11, 247, 0) 5px 5px, rgba(21, 6, 204, 0) 10px 10px, rgba(23, 7, 138, 0) 15px 15px, rgba(19, 2, 100, 0) 20px 20px, rgba(240, 46, 170, 0) 25px 25px; ">
					<div class="breadcrumb-area-content">
						<h1>@Model.Movie.Title</h1>
					</div>
				</div>
			</div>
		</div>
	</section><!-- breadcrumb area end -->
	<!-- transformers area start -->
	<section class="transformers-area">
		<div class="container">
			<div class="transformers-box">
				<div class="row flexbox-center">
					<div class="col-lg-5 text-lg-left text-center">
						<div class="transformers-content">
							<div onclick="GetId(@Model.Movie.Id)" id="div">
								<a id="@Model.Movie.Id" class="popup-youtube">
									<img id="radiusImg" src="@((string.IsNullOrEmpty(@Model.Movie.PosterPath)) ? "/img/DefultMovie.jpg" : "http://image.tmdb.org/t/p/original/" + @Model.Movie.PosterPath)" alt="portfolio" />
									<i class="icofont icofont-ui-play"></i>

								</a>
							</div>



						</div>

					</div>
					<div class="col-lg-7">
						<div class="transformers-content" style="font-size: 30px;">
							<h1>
								<strong>
									@Model.Movie.OriginalTitle
								</strong>
							</h1>
							<ul>

								<li>
									<div class="transformers-left">
										Status:
									</div>
									<div class="transformers-right">
										@Model.Movie.Status
									</div>
								</li>
								<li>
									<div class="transformers-left">
										Gener:
									</div>
									<div class="row">
									@foreach (var item in Model.Movie.Genres)
									{
										<div class="transformers-right col-lg-4 " style="margin:0px 20px 20px 20px ">
											@item.Name
										</div>
									}
								</div>
							</li>
							<li>
								<div class="transformers-left">
									Release Date:
								</div>
								<div class="transformers-right">
									@Model.Movie.ReleaseDate.Value.Year
								</div>
							</li>

							<li>
								<div class="transformers-left">
									VoteAverage:
								</div>
								<div class="author-review">
									@Model.Movie.VoteAverage
									@for (int i = 1; i < Model.Movie.VoteAverage / 2; i++)
									{
										<i class="icofont icofont-star"></i>
									}

								</div>
							</li>
							<li>
								<div class="transformers-left">
									VoteCount:
								</div>
								<div class="author-review">
									@Model.Movie.VoteCount


								</div>
							</li>
							<li>
								<div class="transformers-left">
									TagLine:
								</div>
								<div class="transformers-right">
									<h5>
										@Model.Movie.Tagline
									</h5>
								</div>
							</li>
							<li>
								<div onclick="GetId(@Model.Movie.Id)" id="div">
									<a id="@Model.Movie" class="theme-btn popup-youtube">
										Watch Trailer

									</a>
								</div>
							</li>

						</ul>
					</div>
				</div>
			</div>


		</div>
	</div>
</section><!-- transformers area end -->
<!-- details area start -->
<section class="details-area">
	<div class="container">
		<div class="row">
			<div class="col-lg-12" style="box-shadow: rgba(18, 11, 247, 0) 5px 5px, rgba(21, 6, 204, 0) 10px 10px, rgba(23, 7, 138, 0) 15px 15px, rgba(19, 2, 100, 0) 20px 20px, rgba(240, 46, 170, 0) 25px 25px; ">
				<div class="details-content">
					<div class="details-overview">
						<h2>Overview</h2>
						<p style="font-size: 22px;">
							@Model.Movie.Overview
						</p>
					</div>
				</div>
			</div>
		</div>
	</div>
</section><!-- details area end -->
<!-- details area start -->
<section class="details-area">
	<div class="container">
		<div class="row">
			<div class="col-lg-12" style="box-shadow: rgba(18, 11, 247, 0) 5px 5px, rgba(21, 6, 204, 0) 10px 10px, rgba(23, 7, 138, 0) 15px 15px, rgba(19, 2, 100, 0) 20px 20px, rgba(240, 46, 170, 0) 25px 25px; ">
				<div class="details-content">
					<section class="portfolio-area pt-60">
						<div class="container">
							<div class="row">
								<div class="col-lg-6 text-center text-lg-left">
									<div class="section-title" id="4444">
										<h1><i class="icofont icofont-movie"></i> Casts </h1>
									</div>
								</div>
							</div>

							<hr />
							<div class="row">
								<div class="col-lg-12">
									<div class="row portfolio-item">
										@foreach (var cast in Model.Credits.Cast.Distinct(new CastEqualityComparer()).Take(20).OrderBy(n => n.Order))
										{

											<div class="col-lg-3 col-md-4 col-sm-6 ">
												<a asp-controller="PersonDetails" asp-action="Index" asp-route-id="@cast.Id">
													<div class="single-portfolio">
														<div class="single-portfolio-img" id="oadAction">
															<img id="radiusprofile" src="@((string.IsNullOrEmpty(cast.ProfilePath))?"/img/cast/defult.png":"http://image.tmdb.org/t/p/w185/"+@cast.ProfilePath)" alt="dont have profile" style="border-radius: 10%;" />
														</div>
														<div id="senoh" class="portfolio-content">
															<h3>@cast.Name</h3>

															<div class="review">
																<div class="author-review">

																	<h6 id="senoh">character : @cast.Character </h6>

																</div><br />
																<p>@cast.Popularity Popularity</p>
															</div>
														</div>
													</div>
												</a>
											</div>
										}
									</div>
								</div>
							</div>
						</div>
					</section><!-- portfolio section end -->
				</div>
			</div>
		</div>
	</div>
</section><!-- details area end -->
<!-- details area start -->
<section class="details-area">
	<div class="container">
		<div class="row">
			<div class="col-lg-12" style="box-shadow: rgba(18, 11, 247, 0) 5px 5px, rgba(21, 6, 204, 0) 10px 10px, rgba(23, 7, 138, 0) 15px 15px, rgba(19, 2, 100, 0) 20px 20px, rgba(240, 46, 170, 0) 25px 25px; ">
				<div class="details-content">
					<section class="portfolio-area pt-60">
						<div class="container">
							<div class="row">
								<div class="col-lg-6 text-center text-lg-left">
									<div class="section-title" id="4444">
										<h1><i class="icofont icofont-movie"></i> Crews </h1>
									</div>
								</div>
							</div>

							<hr />
							<div class="row">
								<div class="col-lg-12">
									<div class="row portfolio-item">
										@foreach (var cast in Model.Credits.Crew.Distinct(new CrewEqualityComparer()).Take(20))
										{

											<div class="col-lg-3 col-md-4 col-sm-6">
												<a asp-controller="PersonDetails" asp-action="Index" asp-route-id="@cast.Id">
													<div class="single-portfolio">
														<div class="single-portfolio-img" id="oadAction">
															<img id="radiusprofile" src="@((string.IsNullOrEmpty(cast.ProfilePath))?"/img/cast/defult.png":"http://image.tmdb.org/t/p/w185/"+@cast.ProfilePath)" alt="dont have profile" style="border-radius: 10%;" />
														</div>
														<div class="portfolio-content">
															<h2 id="senoh">@cast.Name</h2>
															<div class="review">
																<div id="senoh" class="author-review">

																	<h6>Department : @cast.Department</h6>

																</div><br />
																<p>@cast.Popularity Popularity</p>
															</div>
														</div>
													</div>
												</a>
											</div>
										}
									</div>
								</div>
							</div>
						</div>
					</section><!-- portfolio section end -->
				</div>
			</div>
		</div>
	</div>
</section><!-- details area end -->
<!-- details area start -->
<section class="details-area">
	<div class="container">
		<div class="row">
			<div class="col-lg-12" style="box-shadow: rgba(18, 11, 247, 0) 5px 5px, rgba(21, 6, 204, 0) 10px 10px, rgba(23, 7, 138, 0) 15px 15px, rgba(19, 2, 100, 0) 20px 20px, rgba(240, 46, 170, 0) 25px 25px; ">
				<div class="details-content">
					<div class="col-lg-12" style="margin-bottom:11px">
						<div class="col-lg-6 text-center text-lg-left" style="
    margin-bottom: 8px;
">
							<div class="section-title">
								<h1><i class="icofont icofont-movie"></i>The similar Movie </h1>
							</div>
						</div>
						<div class="row portfolio-item">
							@foreach (var item in Model.SimilarMovie.results.Take(12))
							{
								<div class="col-lg-3 col-md-4 col-sm-6">
									<a asp-controller="MovieDetails" asp-action="Index" asp-route-id="@item.Id">
										<div class="single-portfolio">
											<div class="single-portfolio-img">


												<img id="radiusImg" src="@((string.IsNullOrEmpty(@item.PosterPath)) ? "/img/DefultMovie.jpg" : "http://image.tmdb.org/t/p/w185/" + @item.PosterPath)" alt="portfolio" />
												<div onclick="GetId(@item.Id)" id="div">
													<a id="@item.Id" class="popup-youtube">
														<i class="icofont icofont-ui-play"></i>
													</a>
												</div>


											</div>
											<div class="portfolio-content">
												<h2 id="senoh">@item.Title</h2>
												<div class="review">
													<div class="author-review">
														@for (int i = 1; i < item.VoteAverage / 2; i++)
														{
															<i class="icofont icofont-star"></i>
														}

													</div>
													<h5>@item.VoteCount voters</h5>
												</div>
											</div>
										</div>
									</a>
								</div>
							}

						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section><!-- details area end -->
<!-- details area start -->
<section class="details-area">
	<div class="container">
		<div class="row">
			<div class="col-lg-12" style="box-shadow: rgba(18, 11, 247, 0) 5px 5px, rgba(21, 6, 204, 0) 10px 10px, rgba(23, 7, 138, 0) 15px 15px, rgba(19, 2, 100, 0) 20px 20px, rgba(240, 46, 170, 0) 25px 25px; ">
				<div class="details-content">
					<div class="details-reply">
						<h2>Leave a Reply</h2>
						@{
							int counter = 0;
							int counter2 = 0;
							int counter3 = 0;
							int counter4 = 0;
							int counter5 = 0;
							int counter6 = 0;
							int counter7 = 0;
						}
						<div class="row justify-content-end">
							@foreach (var riv in Model.Reviews)
							{
								if (counter > 20)
								{
									break;
								}
								if (riv.ReplayParent == null)
								{
									<div class="col-12 reply">
										<div class="row " style="margin:10px">
											<a class="badge badge-secondary text-nowrap" href="/Profile?userId=@riv.UserId"><img class="img-person" src="/img/cast/defult.png"> @riv.User.Name - <small>@riv.CreatedAt.ToString("MM/dd  h:mm")</small></a>

											<p class="comment col-11">@riv.Content</p>
											<buttom class="btn btn-outline-primary btn-sm col-1" onclick="rep(@riv.Id)">
												<i class="icofont icofont-reply"></i>
											</buttom>
										</div>
									</div>
									foreach (var riv2 in Model.Reviews)
									{
										if (riv2.ReplayParent == riv.Id)
										{
											<div class="col-11  secondrep">
												<div class="row" style="margin:10px">
													<a class="badge badge-secondary text-nowrap" href="/Profile?userId=@riv2.UserId"><img class="img-person" src="/img/cast/defult.png"> @riv2.User.Name - <small>@riv2.CreatedAt.ToString("MM/dd  h:mm")</small></a>

													<p class="comment col-11">@riv2.Content</p>
													<buttom class="btn btn-outline-primary btn-sm col-1" onclick="rep(@riv2.Id)">
														<i class="icofont icofont-reply"></i>
													</buttom>
												</div>
											</div>
											foreach (var riv3 in Model.Reviews)
											{
												if (riv3.ReplayParent == riv2.Id)
												{
																								<div class="col-10  secondrep">
												<div class="row" style="margin:10px">
															<a class="badge badge-secondary text-nowrap" href="/Profile?userId=@riv.UserId"><img class="img-person" src="/img/cast/defult.png"> @riv3.User.Name - <small>@riv3.CreatedAt.ToString("MM/dd  h:mm")</small></a>

															<p class="comment col-11">@riv3.Content</p>
													<buttom class="btn btn-outline-primary btn-sm col-1" onclick="rep(@riv.Id)">
														<i class="icofont icofont-reply"></i>
													</buttom>
												</div>
											</div>
													foreach (var riv4 in Model.Reviews)
													{
														if (riv4.ReplayParent == riv3.Id)
														{
															<div class="col-9  secondrep">
																<div class="row" style="margin:10px">
																	<a class="badge badge-secondary text-nowrap" href="/Profile?userId=@riv.UserId"><img class="img-person" src="/img/cast/defult.png"> @riv4.User.Name - <small>@riv4.CreatedAt.ToString("MM/dd  h:mm")</small></a>

																	<p class="comment col-11">@riv4.Content</p>
																	<buttom class="btn btn-outline-primary btn-sm col-1" onclick="rep(@riv.Id)">
																		<i class="icofont icofont-reply"></i>
																	</buttom>
																</div>
															</div>
															foreach (var riv5 in Model.Reviews)
															{
																if (riv5.ReplayParent == riv4.Id)
																{
															<div class="col-8  secondrep">
																<div class="row" style="margin:10px">
																	<a class="badge badge-secondary text-nowrap" href="/Profile?userId=@riv.UserId"><img class="img-person" src="/img/cast/defult.png"> @riv5.User.Name - <small>@riv5.CreatedAt.ToString("MM/dd  h:mm")</small></a>

																			<p class="comment col-11">@riv5.Content</p>
																	<buttom class="btn btn-outline-primary btn-sm col-1" onclick="rep(@riv.Id)">
																		<i class="icofont icofont-reply"></i>
																	</buttom>
																</div>
															</div>
																	foreach (var riv6 in Model.Reviews)
																	{
																		if (riv6.ReplayParent == riv5.Id)
																		{
																			<div class="col-7  secondrep">
																				<div class="row" style="margin:10px">
																					<a class="badge badge-secondary text-nowrap" href="/Profile?userId=@riv.UserId"><img class="img-person" src="/img/cast/defult.png"> @riv6.User.Name - <small>@riv6.CreatedAt.ToString("MM/dd  h:mm")</small></a>

																					<p class="comment col-11">@riv6.Content</p>
																					<buttom class="btn btn-outline-primary btn-sm col-1" onclick="rep(@riv.Id)">
																						<i class="icofont icofont-reply"></i>
																					</buttom>
																				</div>
																			</div>
																			foreach (var riv7 in Model.Reviews)
																			{
																				if (riv7.ReplayParent == riv6.Id)
																				{
																					<div class="col-6"></div>
																					<div class="col-6  secondrep">
																						<div class="row" style="margin:10px">
																							<a class="badge badge-secondary text-nowrap" href="/Profile?userId=@riv.UserId"><img class="img-person" src="/img/cast/defult.png"> @riv7.User.Name - <small>@riv7.CreatedAt.ToString("MM/dd  h:mm")</small></a>

																							<p class="comment col-11">@riv7.Content</p>
																							<buttom class="btn btn-outline-primary btn-sm col-1" onclick="rep(@riv.Id)">
																								<i class="icofont icofont-reply"></i>
																							</buttom>
																						</div>
																					</div>
																					
																					foreach (var riv8 in Model.Reviews)
																					{
																						if (riv8.ReplayParent == riv7.Id)
																						{
																							<div class="col-7"></div>
																							<div class="col-5  secondrep">
																								<div class="row" style="margin:10px">
																									<a class="badge badge-secondary text-nowrap" href="/Profile?userId=@riv.UserId"><img class="img-person" src="/img/cast/defult.png"> @riv8.User.Name - <small>@riv8.CreatedAt.ToString("MM/dd  h:mm")</small></a>

																									<p class="comment col-12">@riv8.Content</p>
																									@*<buttom class="btn btn-outline-primary btn-sm col-1" onclick="rep(@riv.Id)">
																										<i class="icofont icofont-reply"></i>
																									</buttom>*@
																								</div>
																							</div>
																							
																						
																						}
																					}
																					counter7++;
																				}
																			}
																			counter6++;
																		}
																	}
																	counter5++;
																}
															}
															counter4++;
														}
													}
													counter3++;
												}
											}
											counter2++;
										}
									}
									counter++;
								}

							}
						</div>
						@if (!User.Identity.IsAuthenticated)
						{
							<div class="col-lg-3">
								<div class="textarea-container">
									<a href="/signin" class="btn btn-outline-danger">Sign In to send message</a>
								</div>
							</div>
						}
						<form id="forNon" style="position:fixed; display : none ;" asp-controller="MovieDetails" asp-action="GetReview">
							<div onclick="cloo()" style="width: 600%; height: 600%; position: absolute;top: 0;left: 0;z-index: 99;margin-left: -110%;margin-top: -110%;"></div>
							<div class="row" style="z-index: 1000;">


								@if (User.Identity.IsAuthenticated)
								{
									<div class="col-lg-12">
										<div class="textarea-container">
											<textarea asp-for="ReviewContent" placeholder="Type Here Message"></textarea>
											<button><i class="icofont icofont-send-mail"></i></button>
										</div>
									</div>
									<div class="details-comment" style="margin-top: 6%;margin-left: 37%;">
										<input type="submit" class="theme-btn theme-btn2" value="Post Comment" />
										@*<p>You may use these HTML tags and attributes: You may use these HTML tags and attributes: You may use these HTML tags and attributes: </p>*@
									</div>
								}


							</div>
							<input type="hidden" asp-for="Movie.Id" />
							<input id="rept" type="hidden" asp-for="ReplayParent" value="" />

						</form>
					</div>

					<form asp-controller="MovieDetails" asp-action="GetReview">
						<div class="row">
							@*<div class="col-lg-4">
							<div class="select-container">
							<input type="text" placeholder="Name" />
							<i class="icofont icofont-ui-user"></i>
							</div>
							</div>
							<div class="col-lg-4">
							<div class="select-container">
							<input type="text" placeholder="Email" />
							<i class="icofont icofont-envelope"></i>
							</div>
							</div>
							<div class="col-lg-4">
							<div class="select-container">
							<input type="text" placeholder="Phone" />
							<i class="icofont icofont-phone"></i>
							</div>
							</div>*@
							@if (User.Identity.IsAuthenticated)
							{
								<div class="col-lg-12">
									<div class="textarea-container">
										<textarea asp-for="ReviewContent" placeholder="Type Here Message"></textarea>
										<button><i class="icofont icofont-send-mail"></i></button>
									</div>
								</div>
								<div class="details-comment" style="margin-top: 3%;margin-left: 86%;">
									<input type="submit" class="theme-btn theme-btn2" value="Post Comment" />
									@*<p>You may use these HTML tags and attributes: You may use these HTML tags and attributes: You may use these HTML tags and attributes: </p>*@
								</div>
							}
							else
							{

							}

						</div>
						<input type="hidden" asp-for="Movie.Id" />

					</form>
				</div>
			</div>
		</div>
	</div>
</section><!-- details area end -->
<script>
	function cloo() {
		document.getElementById("forNon").setAttribute("style", "display :none ;");
	}
	function rep(Id) {
		//   document.getElementById("forNon").removeChild();
		const o = document.getElementById("forNon");
		o.setAttribute("style", "display :flex;position: fixed;z-index: 1;top: 231px;left: 34%;");
		const t = document.createElement("input");
		t.setAttribute("type", "hidden");
		//t.setAttribute("name", "ReplayParent");
		//t.setAttribute("asp-for", Id);
		t.setAttribute("asp-for", "Movie.Id");
		o.appendChild(t);
		document.getElementById("rept").setAttribute("value", Id);
	}
</script>